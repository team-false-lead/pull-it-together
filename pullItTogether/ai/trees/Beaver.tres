[gd_resource type="BehaviorTree" load_steps=49 format=3 uid="uid://cdntafo1eagv5"]

[ext_resource type="Script" uid="uid://du445sow2w3lg" path="res://ai/tasks/MoveTo.gd" id="1_v88ds"]
[ext_resource type="Script" uid="uid://c0omlb2afmd1g" path="res://ai/tasks/PickupPlank.gd" id="2_7y0tj"]
[ext_resource type="Script" uid="uid://dbgfhv0qxiwai" path="res://ai/tasks/AttackWheel.gd" id="4_lsdq3"]
[ext_resource type="Script" uid="uid://bo4phm0kj0f7w" path="res://ai/tasks/GetRandomPoint.gd" id="5_7r8yy"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_mu0o3"]
var/hasPlank/name = &"hasPlank"
var/hasPlank/type = 1
var/hasPlank/value = false
var/hasPlank/hint = 0
var/hasPlank/hint_string = ""
var/plankInRange/name = &"plankInRange"
var/plankInRange/type = 1
var/plankInRange/value = false
var/plankInRange/hint = 0
var/plankInRange/hint_string = ""
var/wagonInRange/name = &"wagonInRange"
var/wagonInRange/type = 1
var/wagonInRange/value = false
var/wagonInRange/hint = 0
var/wagonInRange/hint_string = ""
var/hasWheelTarget/name = &"hasWheelTarget"
var/hasWheelTarget/type = 1
var/hasWheelTarget/value = false
var/hasWheelTarget/hint = 0
var/hasWheelTarget/hint_string = ""
var/wheelBroken/name = &"wheelBroken"
var/wheelBroken/type = 1
var/wheelBroken/value = false
var/wheelBroken/hint = 0
var/wheelBroken/hint_string = ""
binding/hasPlank = NodePath(".:hasPlank")
binding/plankInRange = NodePath(".:plankInRange")
binding/wagonInRange = NodePath(".:wagonInRange")
binding/hasWheelTarget = NodePath(".:hasWheelTarget")
binding/wheelBroken = NodePath(".:wheelBroken")
resource_local_to_scene = true

[sub_resource type="BBVariant" id="BBVariant_mu0o3"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_jrsvk"]
variable = &"hasPlank"
value = SubResource("BBVariant_mu0o3")

[sub_resource type="BTAction" id="BTAction_7s2bl"]
script = ExtResource("5_7r8yy")
patrol_radius = 5.0

[sub_resource type="BTAction" id="BTAction_v88ds"]
script = ExtResource("1_v88ds")
acceptance_radius = 1.0
slowdown_radius = 2.0

[sub_resource type="BTTimeLimit" id="BTTimeLimit_7y0tj"]
children = [SubResource("BTAction_v88ds")]

[sub_resource type="BTAlwaysSucceed" id="BTAlwaysSucceed_pak3h"]
children = [SubResource("BTTimeLimit_7y0tj")]

[sub_resource type="BTWait" id="BTWait_lsdq3"]
duration = 2.0

[sub_resource type="BTSequence" id="BTSequence_7r8yy"]
custom_name = "Patrol"
children = [SubResource("BTAction_7s2bl"), SubResource("BTAlwaysSucceed_pak3h"), SubResource("BTWait_lsdq3")]

[sub_resource type="BTSequence" id="BTSequence_mu0o3"]
custom_name = "Run Away With Plank"
children = [SubResource("BTCheckVar_jrsvk"), SubResource("BTSequence_7r8yy")]

[sub_resource type="BBVariant" id="BBVariant_gey36"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_2c5ag"]
variable = &"plankInRange"
value = SubResource("BBVariant_gey36")

[sub_resource type="BTAction" id="BTAction_1shfx"]
script = ExtResource("1_v88ds")
acceptance_radius = 1.0
slowdown_radius = 2.0

[sub_resource type="BTTimeLimit" id="BTTimeLimit_v88ds"]
children = [SubResource("BTAction_1shfx")]

[sub_resource type="BTAction" id="BTAction_rewac"]
script = ExtResource("2_7y0tj")

[sub_resource type="BTSequence" id="BTSequence_jrsvk"]
custom_name = "Grab Plank"
children = [SubResource("BTCheckVar_2c5ag"), SubResource("BTTimeLimit_v88ds"), SubResource("BTAction_rewac")]

[sub_resource type="BBVariant" id="BBVariant_1jble"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_gey36"]
variable = &"plankInRange"
value = SubResource("BBVariant_1jble")

[sub_resource type="BTRepeatUntilSuccess" id="BTRepeatUntilSuccess_2c5ag"]
custom_name = "StopIfPlankInRange"
children = [SubResource("BTCheckVar_gey36")]

[sub_resource type="BBVariant" id="BBVariant_wxpr4"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_hmibo"]
variable = &"wagonInRange"
value = SubResource("BBVariant_wxpr4")

[sub_resource type="BBVariant" id="BBVariant_7s2bl"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_v88ds"]
variable = &"hasWheelTarget"
value = SubResource("BBVariant_7s2bl")

[sub_resource type="BTAction" id="BTAction_ypeva"]
script = ExtResource("1_v88ds")
acceptance_radius = 1.0
slowdown_radius = 2.0

[sub_resource type="BTAction" id="BTAction_2e48u"]
script = ExtResource("4_lsdq3")

[sub_resource type="BTWait" id="BTWait_v88ds"]
duration = 2.0

[sub_resource type="BBVariant" id="BBVariant_upqbt"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_ryjl1"]
variable = &"wheelBroken"
value = SubResource("BBVariant_upqbt")

[sub_resource type="BTSequence" id="BTSequence_7y0tj"]
children = [SubResource("BTAction_ypeva"), SubResource("BTAction_2e48u"), SubResource("BTWait_v88ds"), SubResource("BTCheckVar_ryjl1")]

[sub_resource type="BTRepeatUntilSuccess" id="BTRepeatUntilSuccess_g3bpl"]
children = [SubResource("BTSequence_7y0tj")]

[sub_resource type="BTSequence" id="BTSequence_7jdii"]
custom_name = "Attack Wheel"
children = [SubResource("BTCheckVar_hmibo"), SubResource("BTCheckVar_v88ds"), SubResource("BTRepeatUntilSuccess_g3bpl")]

[sub_resource type="BTParallel" id="BTParallel_1shfx"]
custom_name = "AttackUnlessPlank"
children = [SubResource("BTRepeatUntilSuccess_2c5ag"), SubResource("BTSequence_7jdii")]

[sub_resource type="BBVariant" id="BBVariant_rewac"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_wxpr4"]
variable = &"plankInRange"
value = SubResource("BBVariant_rewac")

[sub_resource type="BTRepeatUntilSuccess" id="BTRepeatUntilSuccess_hmibo"]
custom_name = "StopIfPlankInRange"
children = [SubResource("BTCheckVar_wxpr4")]

[sub_resource type="BTAction" id="BTAction_out0v"]
script = ExtResource("5_7r8yy")
patrol_radius = 5.0

[sub_resource type="BTAction" id="BTAction_k57rh"]
script = ExtResource("1_v88ds")
acceptance_radius = 1.0
slowdown_radius = 2.0

[sub_resource type="BTTimeLimit" id="BTTimeLimit_7s2bl"]
children = [SubResource("BTAction_k57rh")]

[sub_resource type="BTAlwaysSucceed" id="BTAlwaysSucceed_7s2bl"]
children = [SubResource("BTTimeLimit_7s2bl")]

[sub_resource type="BTWait" id="BTWait_xcr1a"]
duration = 2.0

[sub_resource type="BTSequence" id="BTSequence_mcitd"]
custom_name = "Patrol"
children = [SubResource("BTAction_out0v"), SubResource("BTAlwaysSucceed_7s2bl"), SubResource("BTWait_xcr1a")]

[sub_resource type="BTParallel" id="BTParallel_mbbb1"]
custom_name = "PatrolUnlessPlank"
children = [SubResource("BTRepeatUntilSuccess_hmibo"), SubResource("BTSequence_mcitd")]

[sub_resource type="BTWait" id="BTWait_7s2bl"]
custom_name = "Fail Safe Wait"

[sub_resource type="BTSelector" id="BTSelector_jrsvk"]
custom_name = "Sel - Root"
children = [SubResource("BTSequence_mu0o3"), SubResource("BTSequence_jrsvk"), SubResource("BTParallel_1shfx"), SubResource("BTParallel_mbbb1"), SubResource("BTWait_7s2bl")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_mu0o3")
root_task = SubResource("BTSelector_jrsvk")
