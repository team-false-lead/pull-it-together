[gd_resource type="BehaviorTree" load_steps=52 format=3 uid="uid://bbunrudt06ing"]

[ext_resource type="Script" uid="uid://bo4phm0kj0f7w" path="res://ai/tasks/GetRandomPoint.gd" id="1_a4amu"]
[ext_resource type="Script" uid="uid://du445sow2w3lg" path="res://ai/tasks/MoveTo.gd" id="2_mfd21"]
[ext_resource type="Script" uid="uid://c0omlb2afmd1g" path="res://ai/tasks/PickupItem.gd" id="3_a4amu"]
[ext_resource type="Script" uid="uid://dbgfhv0qxiwai" path="res://ai/tasks/AttackWheel.gd" id="4_8f5kg"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_a4amu"]
var/hasMeat/name = &"hasMeat"
var/hasMeat/type = 1
var/hasMeat/value = false
var/hasMeat/hint = 0
var/hasMeat/hint_string = ""
var/meatInRange/name = &"meatInRange"
var/meatInRange/type = 1
var/meatInRange/value = false
var/meatInRange/hint = 0
var/meatInRange/hint_string = ""
var/playerInRange/name = &"playerInRange"
var/playerInRange/type = 1
var/playerInRange/value = false
var/playerInRange/hint = 0
var/playerInRange/hint_string = ""
var/hasPlayerTarget/name = &"hasPlayerTarget"
var/hasPlayerTarget/type = 1
var/hasPlayerTarget/value = false
var/hasPlayerTarget/hint = 0
var/hasPlayerTarget/hint_string = ""
var/finishedAttackPlayer/name = &"finishedAttackPlayer"
var/finishedAttackPlayer/type = 1
var/finishedAttackPlayer/value = false
var/finishedAttackPlayer/hint = 0
var/finishedAttackPlayer/hint_string = ""
resource_local_to_scene = true

[sub_resource type="BBVariant" id="BBVariant_mu0o3"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_jrsvk"]
variable = &"hasPlank"
value = SubResource("BBVariant_mu0o3")

[sub_resource type="BTAction" id="BTAction_7s2bl"]
script = ExtResource("1_a4amu")
patrol_radius = 15.0

[sub_resource type="BTAction" id="BTAction_v88ds"]
script = ExtResource("2_mfd21")
acceptance_radius = 1.0
slowdown_radius = 2.0

[sub_resource type="BTTimeLimit" id="BTTimeLimit_7y0tj"]
children = [SubResource("BTAction_v88ds")]

[sub_resource type="BTAlwaysSucceed" id="BTAlwaysSucceed_pak3h"]
children = [SubResource("BTTimeLimit_7y0tj")]

[sub_resource type="BTWait" id="BTWait_lsdq3"]
duration = 2.0

[sub_resource type="BTSequence" id="BTSequence_7r8yy"]
custom_name = "Patrol"
children = [SubResource("BTAction_7s2bl"), SubResource("BTAlwaysSucceed_pak3h"), SubResource("BTWait_lsdq3")]

[sub_resource type="BTSequence" id="BTSequence_mu0o3"]
custom_name = "Run Away With Plank"
children = [SubResource("BTCheckVar_jrsvk"), SubResource("BTSequence_7r8yy")]

[sub_resource type="BBVariant" id="BBVariant_gey36"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_2c5ag"]
variable = &"plankInRange"
value = SubResource("BBVariant_gey36")

[sub_resource type="BTAction" id="BTAction_1shfx"]
script = ExtResource("2_mfd21")
acceptance_radius = 1.0
slowdown_radius = 2.0

[sub_resource type="BTTimeLimit" id="BTTimeLimit_v88ds"]
children = [SubResource("BTAction_1shfx")]

[sub_resource type="BTAction" id="BTAction_rewac"]
script = ExtResource("3_a4amu")

[sub_resource type="BTSequence" id="BTSequence_jrsvk"]
custom_name = "Grab Plank"
children = [SubResource("BTCheckVar_2c5ag"), SubResource("BTTimeLimit_v88ds"), SubResource("BTAction_rewac")]

[sub_resource type="BBVariant" id="BBVariant_7s2bl"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_v88ds"]
variable = &"wagonInRange"
value = SubResource("BBVariant_7s2bl")

[sub_resource type="BBVariant" id="BBVariant_7y0tj"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_pak3h"]
variable = &"hasWheelTarget"
value = SubResource("BBVariant_7y0tj")

[sub_resource type="BBVariant" id="BBVariant_v88ds"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_7y0tj"]
variable = &"hasPlank"
value = SubResource("BBVariant_v88ds")

[sub_resource type="BTRepeatUntilSuccess" id="BTRepeatUntilSuccess_pak3h"]
custom_name = "StopIfHasPlank"
children = [SubResource("BTCheckVar_7y0tj")]

[sub_resource type="BBVariant" id="BBVariant_1jble"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_gey36"]
variable = &"plankInRange"
value = SubResource("BBVariant_1jble")

[sub_resource type="BTRepeatUntilSuccess" id="BTRepeatUntilSuccess_2c5ag"]
custom_name = "StopIfPlankInRange"
children = [SubResource("BTCheckVar_gey36")]

[sub_resource type="BTAction" id="BTAction_lsdq3"]
script = ExtResource("2_mfd21")
acceptance_radius = 1.0
slowdown_radius = 2.0

[sub_resource type="BTAction" id="BTAction_7r8yy"]
script = ExtResource("4_8f5kg")

[sub_resource type="BTWait" id="BTWait_1jble"]
duration = 2.0

[sub_resource type="BBVariant" id="BBVariant_2c5ag"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_1shfx"]
variable = &"wheelBroken"
value = SubResource("BBVariant_2c5ag")

[sub_resource type="BTSequence" id="BTSequence_rewac"]
children = [SubResource("BTAction_lsdq3"), SubResource("BTAction_7r8yy"), SubResource("BTWait_1jble"), SubResource("BTCheckVar_1shfx")]

[sub_resource type="BTRepeatUntilSuccess" id="BTRepeatUntilSuccess_wxpr4"]
custom_name = "Attack"
children = [SubResource("BTSequence_rewac")]

[sub_resource type="BTParallel" id="BTParallel_7s2bl"]
children = [SubResource("BTRepeatUntilSuccess_pak3h"), SubResource("BTRepeatUntilSuccess_2c5ag"), SubResource("BTRepeatUntilSuccess_wxpr4")]

[sub_resource type="BTSequence" id="BTSequence_hmibo"]
custom_name = "Attack Wheel"
children = [SubResource("BTCheckVar_v88ds"), SubResource("BTCheckVar_pak3h"), SubResource("BTParallel_7s2bl")]

[sub_resource type="BBVariant" id="BBVariant_rewac"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_wxpr4"]
variable = &"plankInRange"
value = SubResource("BBVariant_rewac")

[sub_resource type="BTRepeatUntilSuccess" id="BTRepeatUntilSuccess_hmibo"]
custom_name = "StopIfPlankInRange"
children = [SubResource("BTCheckVar_wxpr4")]

[sub_resource type="BTAction" id="BTAction_out0v"]
script = ExtResource("1_a4amu")
patrol_radius = 5.0

[sub_resource type="BTAction" id="BTAction_k57rh"]
script = ExtResource("2_mfd21")
acceptance_radius = 1.0
slowdown_radius = 2.0

[sub_resource type="BTTimeLimit" id="BTTimeLimit_7s2bl"]
children = [SubResource("BTAction_k57rh")]

[sub_resource type="BTAlwaysSucceed" id="BTAlwaysSucceed_7s2bl"]
children = [SubResource("BTTimeLimit_7s2bl")]

[sub_resource type="BTWait" id="BTWait_xcr1a"]
duration = 2.0

[sub_resource type="BTSequence" id="BTSequence_mcitd"]
custom_name = "Patrol"
children = [SubResource("BTAction_out0v"), SubResource("BTAlwaysSucceed_7s2bl"), SubResource("BTWait_xcr1a")]

[sub_resource type="BTParallel" id="BTParallel_mbbb1"]
custom_name = "PatrolUnlessPlank"
children = [SubResource("BTRepeatUntilSuccess_hmibo"), SubResource("BTSequence_mcitd")]

[sub_resource type="BTWait" id="BTWait_7s2bl"]
custom_name = "Fail Safe Wait"

[sub_resource type="BTSelector" id="BTSelector_jrsvk"]
custom_name = "Sel - Root"
children = [SubResource("BTSequence_mu0o3"), SubResource("BTSequence_jrsvk"), SubResource("BTSequence_hmibo"), SubResource("BTParallel_mbbb1"), SubResource("BTWait_7s2bl")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_a4amu")
root_task = SubResource("BTSelector_jrsvk")
